<!--Customization datuak erakusteko kodea-->
<script type="text/javascript">
    function showInOutPorts() {
        const selectElement = document.getElementById("node-input-functype");
        const inPortContainer = document.getElementById("contenedor-inport");
        const outPortContainer = document.getElementById("contenedor-outport");

        switch (selectElement.value) {
            case "":
                inPortContainer.style.display = "none";
                outPortContainer.style.display = "none";
                break;
            case "inport":
                inPortContainer.style.display = "block";
                outPortContainer.style.display = "none";
                break;
            case "outport":
                inPortContainer.style.display = "none";
                outPortContainer.style.display = "block";
                break;
            case "inoutport":
                inPortContainer.style.display = "block";
                outPortContainer.style.display = "block";
                break;
            default:
                break;
        }
    }
</script>

<script type="text/javascript">
    RED.nodes.registerType('Functionality',{
        category: 'programmer',
        color: '#f58216',
        defaults: {
            functionid: {value:""},
            functionname: {value:""},
            funcdescription: {value:""},
            funccustomization: {value:""},
            functype: {value:""},
            inportname: {value:""},
            inportdatatype: {value:""},
            inportprotocol: {value:""},
            outportname: {value:""},
            outportdatatype: {value:""},
            outportprotocol: {value:""}
        },
        inputs:1,
        outputs:1,
        inputLabels: "Sarrera atakaren datu formatua TNumber da",
        outputLabels: "Irteera atakaren datu formatua TNumber da",
        icon: "computer-engineering-icon.svg",
        label: function() {
            return this.label || "Functionality";
        },
        oneditprepare: function() {
            var node = this;
            $("#node-input-function").on("change", function() {
                node.label = $(this).val();
            });
        },
        oneditsave: function () {
            this.label = $("#node-input-function").val();
        }
    });
</script>

<script type="text/html" data-template-name="Functionality">
    <div class="form-row">
        <div id="contenedor-id">
            <label for="node-input-functionid"><i class="fa fa-tag"></i> Sartu IDa </label>
            <input name="functionality-id" id="node-input-functionid" type="text"
                   placeholder="Funtzionalitatearen IDa">
        </div>
        <br>
        <div id="contenedor-name">
            <label for="node-input-functionname"><i class="fa fa-tag"></i> Sartu izena </label>
            <input name="functionality-name" id="node-input-functionname" type="text"
                   placeholder="Funtzionalitatearen izena">
        </div>
        <br>
        <div id="contenedor-description">
            <label for="node-input-funcdescription"><i class="fa fa-tag"></i> Sartu deskribapena </label>
            <input name="functionality-description" id="node-input-funcdescription" type="text"
                   placeholder="Funtzionalitatearen deskribapena">
        </div>
        <br>
        <div id="contenedor-customization">
            <label for="node-input-funccustomization"><i class="fa fa-tag"></i> Sartu pertsonalizazioa </label>
            <input name="functionality-customization" id="node-input-funccustomization" type="text"
                   placeholder="Funtzionalitatearen pertsonalizazio aldagaiak">
        </div>
        <br>
        <label for="node-input-functype"><i class="fa fa-tag"></i> Osagai mota </label><span>&nbsp;&nbsp;</span>
        <select name="functionality-type" id="node-input-functype" onchange="showInOutPorts()">
          <option value="inport">Bakarrik sarrera</option>
          <option value="outport">Bakarrik irteera</option>
          <option value="inoutport">Sarrera/irteera</option>
        </select>
        <br>
        <div id="contenedor-inport" style="display: none;">
            <label for="node-input-inportname"><i class="fa fa-tag"></i> Sartu sarreraren izena </label>
            <input name="functionality-inportname" id="node-input-inportname" type="text"
                   placeholder="Sarrera portuaren izena">
            <label for="node-input-inportdatatype"><i class="fa fa-tag"></i> Sartu sarreraren data mota </label>
            <input name="functionality-inportdatatype" id="node-input-inportdatatype" type="text"
                   placeholder="Sarrera portuaren data mota">
            <label for="node-input-inportprotocol"><i class="fa fa-tag"></i> Sartu sarreraren protokoloa </label>
            <input name="functionality-inportprotocol" id="node-input-inportprotocol" type="text"
                   placeholder="Sarrera portuaren protokoloa">
            <hr>
        </div>
        <div id="contenedor-outport" style="display: none;">
            <label for="node-input-outportname"><i class="fa fa-tag"></i> Sartu irteeraren izena </label>
            <input name="functionality-outportname" id="node-input-outportname" type="text"
                   placeholder="Irteera portuaren izena">
            <label for="node-input-outportdatatype"><i class="fa fa-tag"></i> Sartu irteeraren data mota </label>
            <input name="functionality-outportdatatype" id="node-input-outportdatatype" type="text"
                   placeholder="Irteera portuaren data mota">
            <label for="node-input-outportprotocol"><i class="fa fa-tag"></i> Sartu irteeraren protokoloa </label>
            <input name="functionality-outportprotocol" id="node-input-outportprotocol" type="text"
                   placeholder="Irteera portuaren protokoloa">
            <hr>
        </div>
    </div>
</script>

<script type="text/html" data-help-name="Functionality">
    <p>This is a simple node that creates a new instance of source component to read data of eXist database.</p>
    <p>There are some function to choose in order to create the correct instance for the application.</p>
    <ul>
        <li><b>Get assemply station data</b>: This function will get the data of any assembly station of the plant. The data type asociated with this function is TDBStation, so, the outPort will be that type.</li>
        <li><b>Get transport robot data</b>: This function will get the data of any transport robot of the plant. The data type asociated with this function is TDBTransport, so, the outPort will be that type.</li>
        <li><b>Get monitor data</b>: This function will get the data of the monitor. The data type asociated with this function is TDBMonitor.</li>
    </ul>
</script>
